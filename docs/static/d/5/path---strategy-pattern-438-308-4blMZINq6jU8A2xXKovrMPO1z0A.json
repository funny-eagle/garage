{"data":{"site":{"siteMetadata":{"title":"🤔️ Jason Yang's Blog","author":"Jason Yang"}},"markdownRemark":{"id":"a3472029-8c65-5143-973f-d6c811c6760a","excerpt":"在策略模式（Strategy Pattern）中，一个类的行为或其算法可以在运行时更改。这种类型的设计模式属于行为型模式。\n在策略模式中，我们创建表示各种策略的对象和一个行为随着策略对象改变而改变的 context 对象。策略对象改变 context…","html":"<p>在策略模式（Strategy Pattern）中，一个类的行为或其算法可以在运行时更改。这种类型的设计模式属于行为型模式。\n在策略模式中，我们创建表示各种策略的对象和一个行为随着策略对象改变而改变的 context 对象。策略对象改变 context 对象的执行算法。</p>\n<h2>介绍</h2>\n<p><strong>意图</strong>：定义一系列的算法,把它们一个个封装起来, 并且使它们可相互替换。\n<strong>主要解决</strong>：在有多种算法相似的情况下，使用 if…else 所带来的复杂和难以维护。\n<strong>何时使用</strong>：一个系统有许多许多类，而区分它们的只是他们直接的行为。\n<strong>如何解决</strong>：将这些算法封装成一个一个的类，任意地替换。\n<strong>关键代码</strong>：实现同一个接口。\n<strong>应用实例</strong>：\n1、诸葛亮的锦囊妙计，每一个锦囊就是一个策略。\n2、旅行的出游方式，选择骑自行车、坐汽车，每一种旅行方式都是一个策略。\n3、JAVA AWT 中的 LayoutManager。\n<strong>优点</strong>：\n1、算法可以自由切换。\n2、避免使用多重条件判断。\n3、扩展性良好。\n<strong>缺点</strong>：\n1、策略类会增多。\n2、所有策略类都需要对外暴露。\n<strong>使用场景</strong>：\n1、如果在一个系统里面有许多类，它们之间的区别仅在于它们的行为，那么使用策略模式可以动态地让一个对象在许多行为中选择一种行为。\n2、一个系统需要动态地在几种算法中选择一种。\n3、如果一个对象有很多的行为，如果不用恰当的模式，这些行为就只好使用多重的条件选择语句来实现。\n<strong>注意事项</strong>：如果一个系统的策略多于四个，就需要考虑使用混合模式，解决策略类膨胀的问题。</p>\n<h2>实现</h2>\n<p>我们将创建一个定义活动的 Strategy 接口和实现了 Strategy 接口的实体策略类。Context 是一个使用了某种策略的类。\nStrategyPatternDemo，我们的演示类使用 Context 和策略对象来演示 Context 在它所配置或使用的策略改变时的行为变化。\n<a href=\"%60%60\"></a></p>\n<p>步骤 1\n创建一个接口。\nStrategy.java</p>\n<div class='midnight'><pre class=\"editor editor-colors\"><div class=\"line\"><span class=\"syntax--source syntax--java\"><span class=\"syntax--meta syntax--class syntax--java\"><span class=\"syntax--storage syntax--modifier syntax--java\"><span>public</span></span><span>&nbsp;</span><span class=\"syntax--meta syntax--class syntax--identifier syntax--java\"><span class=\"syntax--storage syntax--modifier syntax--java\"><span>interface</span></span><span>&nbsp;</span><span class=\"syntax--entity syntax--name syntax--type syntax--class syntax--java\"><span>Strategy</span></span></span><span>&nbsp;</span><span class=\"syntax--meta syntax--class syntax--body syntax--java\"><span class=\"syntax--punctuation syntax--section syntax--class syntax--begin syntax--java\"><span>{</span></span></span></span></span></div><div class=\"line\"><span class=\"syntax--source syntax--java\"><span class=\"syntax--meta syntax--class syntax--java\"><span class=\"syntax--meta syntax--class syntax--body syntax--java\"><span>&nbsp;&nbsp;&nbsp;</span><span class=\"syntax--meta syntax--method syntax--java\"><span class=\"syntax--storage syntax--modifier syntax--java\"><span>public</span></span><span>&nbsp;</span><span class=\"syntax--meta syntax--method syntax--return-type syntax--java\"><span class=\"syntax--storage syntax--type syntax--primitive syntax--array syntax--java\"><span>int</span></span><span>&nbsp;</span></span><span class=\"syntax--meta syntax--method syntax--identifier syntax--java\"><span class=\"syntax--entity syntax--name syntax--function syntax--java\"><span>doOperation</span></span><span>(</span><span class=\"syntax--storage syntax--type syntax--primitive syntax--array syntax--java\"><span>int</span></span><span>&nbsp;</span><span class=\"syntax--variable syntax--parameter syntax--java\"><span>num1</span></span><span>,&nbsp;</span><span class=\"syntax--storage syntax--type syntax--primitive syntax--array syntax--java\"><span>int</span></span><span>&nbsp;</span><span class=\"syntax--variable syntax--parameter syntax--java\"><span>num2</span></span><span>)</span></span></span><span class=\"syntax--punctuation syntax--terminator syntax--java\"><span>;</span></span></span></span></span></div><div class=\"line\"><span class=\"syntax--source syntax--java\"><span class=\"syntax--meta syntax--class syntax--java\"><span class=\"syntax--punctuation syntax--section syntax--class syntax--end syntax--java\"><span>}</span></span></span></span></div></pre></div>\n<p>步骤 2\n创建实现接口的实体类。\nOperationAdd.java</p>\n<div class='midnight'><pre class=\"editor editor-colors\"><div class=\"line\"><span class=\"syntax--source syntax--java\"><span class=\"syntax--meta syntax--class syntax--java\"><span class=\"syntax--storage syntax--modifier syntax--java\"><span>public</span></span><span>&nbsp;</span><span class=\"syntax--meta syntax--class syntax--identifier syntax--java\"><span class=\"syntax--storage syntax--modifier syntax--java\"><span>class</span></span><span>&nbsp;</span><span class=\"syntax--entity syntax--name syntax--type syntax--class syntax--java\"><span>OperationAdd</span></span></span><span>&nbsp;</span><span class=\"syntax--meta syntax--definition syntax--class syntax--implemented syntax--interfaces syntax--java\"><span class=\"syntax--storage syntax--modifier syntax--implements syntax--java\"><span>implements</span></span><span>&nbsp;</span><span class=\"syntax--entity syntax--other syntax--inherited-class syntax--java\"><span>Strategy</span></span></span><span class=\"syntax--meta syntax--class syntax--body syntax--java\"><span class=\"syntax--punctuation syntax--section syntax--class syntax--begin syntax--java\"><span>{</span></span></span></span></span></div><div class=\"line\"><span class=\"syntax--source syntax--java\"><span class=\"syntax--meta syntax--class syntax--java\"><span class=\"syntax--meta syntax--class syntax--body syntax--java\"><span>&nbsp;&nbsp;&nbsp;</span><span class=\"syntax--storage syntax--type syntax--annotation syntax--java\"><span>@Override</span></span></span></span></span></div><div class=\"line\"><span class=\"syntax--source syntax--java\"><span class=\"syntax--meta syntax--class syntax--java\"><span class=\"syntax--meta syntax--class syntax--body syntax--java\"><span>&nbsp;&nbsp;&nbsp;</span><span class=\"syntax--meta syntax--method syntax--java\"><span class=\"syntax--storage syntax--modifier syntax--java\"><span>public</span></span><span>&nbsp;</span><span class=\"syntax--meta syntax--method syntax--return-type syntax--java\"><span class=\"syntax--storage syntax--type syntax--primitive syntax--array syntax--java\"><span>int</span></span><span>&nbsp;</span></span><span class=\"syntax--meta syntax--method syntax--identifier syntax--java\"><span class=\"syntax--entity syntax--name syntax--function syntax--java\"><span>doOperation</span></span><span>(</span><span class=\"syntax--storage syntax--type syntax--primitive syntax--array syntax--java\"><span>int</span></span><span>&nbsp;</span><span class=\"syntax--variable syntax--parameter syntax--java\"><span>num1</span></span><span>,&nbsp;</span><span class=\"syntax--storage syntax--type syntax--primitive syntax--array syntax--java\"><span>int</span></span><span>&nbsp;</span><span class=\"syntax--variable syntax--parameter syntax--java\"><span>num2</span></span><span>)</span></span><span>&nbsp;</span><span class=\"syntax--meta syntax--method syntax--body syntax--java\"><span class=\"syntax--punctuation syntax--section syntax--method syntax--begin syntax--java\"><span>{</span></span></span></span></span></span></span></div><div class=\"line\"><span class=\"syntax--source syntax--java\"><span class=\"syntax--meta syntax--class syntax--java\"><span class=\"syntax--meta syntax--class syntax--body syntax--java\"><span class=\"syntax--meta syntax--method syntax--java\"><span class=\"syntax--meta syntax--method syntax--body syntax--java\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"syntax--keyword syntax--control syntax--java\"><span>return</span></span><span>&nbsp;num1&nbsp;</span><span class=\"syntax--keyword syntax--operator syntax--arithmetic syntax--java\"><span>+</span></span><span>&nbsp;num2</span><span class=\"syntax--punctuation syntax--terminator syntax--java\"><span>;</span></span></span></span></span></span></span></div><div class=\"line\"><span class=\"syntax--source syntax--java\"><span class=\"syntax--meta syntax--class syntax--java\"><span class=\"syntax--meta syntax--class syntax--body syntax--java\"><span class=\"syntax--meta syntax--method syntax--java\"><span class=\"syntax--meta syntax--method syntax--body syntax--java\"><span>&nbsp;&nbsp;&nbsp;</span></span><span class=\"syntax--punctuation syntax--section syntax--method syntax--end syntax--java\"><span>}</span></span></span></span></span></span></div><div class=\"line\"><span class=\"syntax--source syntax--java\"><span class=\"syntax--meta syntax--class syntax--java\"><span class=\"syntax--punctuation syntax--section syntax--class syntax--end syntax--java\"><span>}</span></span></span></span></div></pre></div>\n<p>OperationSubstract.java</p>\n<div class='midnight'><pre class=\"editor editor-colors\"><div class=\"line\"><span class=\"syntax--source syntax--java\"><span class=\"syntax--meta syntax--class syntax--java\"><span class=\"syntax--storage syntax--modifier syntax--java\"><span>public</span></span><span>&nbsp;</span><span class=\"syntax--meta syntax--class syntax--identifier syntax--java\"><span class=\"syntax--storage syntax--modifier syntax--java\"><span>class</span></span><span>&nbsp;</span><span class=\"syntax--entity syntax--name syntax--type syntax--class syntax--java\"><span>OperationSubstract</span></span></span><span>&nbsp;</span><span class=\"syntax--meta syntax--definition syntax--class syntax--implemented syntax--interfaces syntax--java\"><span class=\"syntax--storage syntax--modifier syntax--implements syntax--java\"><span>implements</span></span><span>&nbsp;</span><span class=\"syntax--entity syntax--other syntax--inherited-class syntax--java\"><span>Strategy</span></span></span><span class=\"syntax--meta syntax--class syntax--body syntax--java\"><span class=\"syntax--punctuation syntax--section syntax--class syntax--begin syntax--java\"><span>{</span></span></span></span></span></div><div class=\"line\"><span class=\"syntax--source syntax--java\"><span class=\"syntax--meta syntax--class syntax--java\"><span class=\"syntax--meta syntax--class syntax--body syntax--java\"><span>&nbsp;&nbsp;&nbsp;</span><span class=\"syntax--storage syntax--type syntax--annotation syntax--java\"><span>@Override</span></span></span></span></span></div><div class=\"line\"><span class=\"syntax--source syntax--java\"><span class=\"syntax--meta syntax--class syntax--java\"><span class=\"syntax--meta syntax--class syntax--body syntax--java\"><span>&nbsp;&nbsp;&nbsp;</span><span class=\"syntax--meta syntax--method syntax--java\"><span class=\"syntax--storage syntax--modifier syntax--java\"><span>public</span></span><span>&nbsp;</span><span class=\"syntax--meta syntax--method syntax--return-type syntax--java\"><span class=\"syntax--storage syntax--type syntax--primitive syntax--array syntax--java\"><span>int</span></span><span>&nbsp;</span></span><span class=\"syntax--meta syntax--method syntax--identifier syntax--java\"><span class=\"syntax--entity syntax--name syntax--function syntax--java\"><span>doOperation</span></span><span>(</span><span class=\"syntax--storage syntax--type syntax--primitive syntax--array syntax--java\"><span>int</span></span><span>&nbsp;</span><span class=\"syntax--variable syntax--parameter syntax--java\"><span>num1</span></span><span>,&nbsp;</span><span class=\"syntax--storage syntax--type syntax--primitive syntax--array syntax--java\"><span>int</span></span><span>&nbsp;</span><span class=\"syntax--variable syntax--parameter syntax--java\"><span>num2</span></span><span>)</span></span><span>&nbsp;</span><span class=\"syntax--meta syntax--method syntax--body syntax--java\"><span class=\"syntax--punctuation syntax--section syntax--method syntax--begin syntax--java\"><span>{</span></span></span></span></span></span></span></div><div class=\"line\"><span class=\"syntax--source syntax--java\"><span class=\"syntax--meta syntax--class syntax--java\"><span class=\"syntax--meta syntax--class syntax--body syntax--java\"><span class=\"syntax--meta syntax--method syntax--java\"><span class=\"syntax--meta syntax--method syntax--body syntax--java\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"syntax--keyword syntax--control syntax--java\"><span>return</span></span><span>&nbsp;num1&nbsp;</span><span class=\"syntax--keyword syntax--operator syntax--arithmetic syntax--java\"><span>-</span></span><span>&nbsp;num2</span><span class=\"syntax--punctuation syntax--terminator syntax--java\"><span>;</span></span></span></span></span></span></span></div><div class=\"line\"><span class=\"syntax--source syntax--java\"><span class=\"syntax--meta syntax--class syntax--java\"><span class=\"syntax--meta syntax--class syntax--body syntax--java\"><span class=\"syntax--meta syntax--method syntax--java\"><span class=\"syntax--meta syntax--method syntax--body syntax--java\"><span>&nbsp;&nbsp;&nbsp;</span></span><span class=\"syntax--punctuation syntax--section syntax--method syntax--end syntax--java\"><span>}</span></span></span></span></span></span></div><div class=\"line\"><span class=\"syntax--source syntax--java\"><span class=\"syntax--meta syntax--class syntax--java\"><span class=\"syntax--punctuation syntax--section syntax--class syntax--end syntax--java\"><span>}</span></span></span></span></div></pre></div>\n<p>OperationMultiply.java</p>\n<div class='midnight'><pre class=\"editor editor-colors\"><div class=\"line\"><span class=\"syntax--source syntax--java\"><span class=\"syntax--meta syntax--class syntax--java\"><span class=\"syntax--storage syntax--modifier syntax--java\"><span>public</span></span><span>&nbsp;</span><span class=\"syntax--meta syntax--class syntax--identifier syntax--java\"><span class=\"syntax--storage syntax--modifier syntax--java\"><span>class</span></span><span>&nbsp;</span><span class=\"syntax--entity syntax--name syntax--type syntax--class syntax--java\"><span>OperationMultiply</span></span></span><span>&nbsp;</span><span class=\"syntax--meta syntax--definition syntax--class syntax--implemented syntax--interfaces syntax--java\"><span class=\"syntax--storage syntax--modifier syntax--implements syntax--java\"><span>implements</span></span><span>&nbsp;</span><span class=\"syntax--entity syntax--other syntax--inherited-class syntax--java\"><span>Strategy</span></span></span><span class=\"syntax--meta syntax--class syntax--body syntax--java\"><span class=\"syntax--punctuation syntax--section syntax--class syntax--begin syntax--java\"><span>{</span></span></span></span></span></div><div class=\"line\"><span class=\"syntax--source syntax--java\"><span class=\"syntax--meta syntax--class syntax--java\"><span class=\"syntax--meta syntax--class syntax--body syntax--java\"><span>&nbsp;&nbsp;&nbsp;</span><span class=\"syntax--storage syntax--type syntax--annotation syntax--java\"><span>@Override</span></span></span></span></span></div><div class=\"line\"><span class=\"syntax--source syntax--java\"><span class=\"syntax--meta syntax--class syntax--java\"><span class=\"syntax--meta syntax--class syntax--body syntax--java\"><span>&nbsp;&nbsp;&nbsp;</span><span class=\"syntax--meta syntax--method syntax--java\"><span class=\"syntax--storage syntax--modifier syntax--java\"><span>public</span></span><span>&nbsp;</span><span class=\"syntax--meta syntax--method syntax--return-type syntax--java\"><span class=\"syntax--storage syntax--type syntax--primitive syntax--array syntax--java\"><span>int</span></span><span>&nbsp;</span></span><span class=\"syntax--meta syntax--method syntax--identifier syntax--java\"><span class=\"syntax--entity syntax--name syntax--function syntax--java\"><span>doOperation</span></span><span>(</span><span class=\"syntax--storage syntax--type syntax--primitive syntax--array syntax--java\"><span>int</span></span><span>&nbsp;</span><span class=\"syntax--variable syntax--parameter syntax--java\"><span>num1</span></span><span>,&nbsp;</span><span class=\"syntax--storage syntax--type syntax--primitive syntax--array syntax--java\"><span>int</span></span><span>&nbsp;</span><span class=\"syntax--variable syntax--parameter syntax--java\"><span>num2</span></span><span>)</span></span><span>&nbsp;</span><span class=\"syntax--meta syntax--method syntax--body syntax--java\"><span class=\"syntax--punctuation syntax--section syntax--method syntax--begin syntax--java\"><span>{</span></span></span></span></span></span></span></div><div class=\"line\"><span class=\"syntax--source syntax--java\"><span class=\"syntax--meta syntax--class syntax--java\"><span class=\"syntax--meta syntax--class syntax--body syntax--java\"><span class=\"syntax--meta syntax--method syntax--java\"><span class=\"syntax--meta syntax--method syntax--body syntax--java\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"syntax--keyword syntax--control syntax--java\"><span>return</span></span><span>&nbsp;num1&nbsp;</span><span class=\"syntax--keyword syntax--operator syntax--arithmetic syntax--java\"><span>*</span></span><span>&nbsp;num2</span><span class=\"syntax--punctuation syntax--terminator syntax--java\"><span>;</span></span></span></span></span></span></span></div><div class=\"line\"><span class=\"syntax--source syntax--java\"><span class=\"syntax--meta syntax--class syntax--java\"><span class=\"syntax--meta syntax--class syntax--body syntax--java\"><span class=\"syntax--meta syntax--method syntax--java\"><span class=\"syntax--meta syntax--method syntax--body syntax--java\"><span>&nbsp;&nbsp;&nbsp;</span></span><span class=\"syntax--punctuation syntax--section syntax--method syntax--end syntax--java\"><span>}</span></span></span></span></span></span></div><div class=\"line\"><span class=\"syntax--source syntax--java\"><span class=\"syntax--meta syntax--class syntax--java\"><span class=\"syntax--punctuation syntax--section syntax--class syntax--end syntax--java\"><span>}</span></span></span></span></div></pre></div>\n<p>步骤 3\n创建 Context 类。</p>\n<div class='midnight'><pre class=\"editor editor-colors\"><div class=\"line\"><span class=\"syntax--source syntax--java\"><span class=\"syntax--storage syntax--type syntax--java\"><span>Context</span></span><span class=\"syntax--keyword syntax--operator syntax--dereference syntax--java\"><span>.</span></span><span>java</span></span></div><div class=\"line\"><span class=\"syntax--source syntax--java\"><span class=\"syntax--meta syntax--class syntax--java\"><span class=\"syntax--storage syntax--modifier syntax--java\"><span>public</span></span><span>&nbsp;</span><span class=\"syntax--meta syntax--class syntax--identifier syntax--java\"><span class=\"syntax--storage syntax--modifier syntax--java\"><span>class</span></span><span>&nbsp;</span><span class=\"syntax--entity syntax--name syntax--type syntax--class syntax--java\"><span>Context</span></span></span><span>&nbsp;</span><span class=\"syntax--meta syntax--class syntax--body syntax--java\"><span class=\"syntax--punctuation syntax--section syntax--class syntax--begin syntax--java\"><span>{</span></span></span></span></span></div><div class=\"line\"><span class=\"syntax--source syntax--java\"><span class=\"syntax--meta syntax--class syntax--java\"><span class=\"syntax--meta syntax--class syntax--body syntax--java\"><span>&nbsp;&nbsp;&nbsp;</span><span class=\"syntax--storage syntax--modifier syntax--java\"><span>private</span></span><span>&nbsp;</span><span class=\"syntax--storage syntax--type syntax--java\"><span>Strategy</span></span><span>&nbsp;strategy</span><span class=\"syntax--punctuation syntax--terminator syntax--java\"><span>;</span></span></span></span></span></div><div class=\"line\"><span class=\"syntax--source syntax--java\"><span class=\"syntax--meta syntax--class syntax--java\"><span class=\"syntax--meta syntax--class syntax--body syntax--java\"><span>&nbsp;</span></span></span></span></div><div class=\"line\"><span class=\"syntax--source syntax--java\"><span class=\"syntax--meta syntax--class syntax--java\"><span class=\"syntax--meta syntax--class syntax--body syntax--java\"><span>&nbsp;&nbsp;&nbsp;</span><span class=\"syntax--meta syntax--method syntax--java\"><span class=\"syntax--storage syntax--modifier syntax--java\"><span>public</span></span><span>&nbsp;</span><span class=\"syntax--meta syntax--method syntax--identifier syntax--java\"><span class=\"syntax--entity syntax--name syntax--function syntax--java\"><span>Context</span></span><span>(</span><span class=\"syntax--storage syntax--type syntax--java\"><span>Strategy</span></span><span>&nbsp;</span><span class=\"syntax--variable syntax--parameter syntax--java\"><span>strategy</span></span><span>)</span></span><span class=\"syntax--meta syntax--method syntax--body syntax--java\"><span class=\"syntax--punctuation syntax--section syntax--method syntax--begin syntax--java\"><span>{</span></span></span></span></span></span></span></div><div class=\"line\"><span class=\"syntax--source syntax--java\"><span class=\"syntax--meta syntax--class syntax--java\"><span class=\"syntax--meta syntax--class syntax--body syntax--java\"><span class=\"syntax--meta syntax--method syntax--java\"><span class=\"syntax--meta syntax--method syntax--body syntax--java\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"syntax--variable syntax--language syntax--java\"><span>this</span></span><span class=\"syntax--keyword syntax--operator syntax--dereference syntax--java\"><span>.</span></span><span>strategy&nbsp;</span><span class=\"syntax--keyword syntax--operator syntax--assignment syntax--java\"><span>=</span></span><span>&nbsp;strategy</span><span class=\"syntax--punctuation syntax--terminator syntax--java\"><span>;</span></span></span></span></span></span></span></div><div class=\"line\"><span class=\"syntax--source syntax--java\"><span class=\"syntax--meta syntax--class syntax--java\"><span class=\"syntax--meta syntax--class syntax--body syntax--java\"><span class=\"syntax--meta syntax--method syntax--java\"><span class=\"syntax--meta syntax--method syntax--body syntax--java\"><span>&nbsp;&nbsp;&nbsp;</span></span><span class=\"syntax--punctuation syntax--section syntax--method syntax--end syntax--java\"><span>}</span></span></span></span></span></span></div><div class=\"line\"><span class=\"syntax--source syntax--java\"><span class=\"syntax--meta syntax--class syntax--java\"><span class=\"syntax--meta syntax--class syntax--body syntax--java\"><span>&nbsp;</span></span></span></span></div><div class=\"line\"><span class=\"syntax--source syntax--java\"><span class=\"syntax--meta syntax--class syntax--java\"><span class=\"syntax--meta syntax--class syntax--body syntax--java\"><span>&nbsp;&nbsp;&nbsp;</span><span class=\"syntax--meta syntax--method syntax--java\"><span class=\"syntax--storage syntax--modifier syntax--java\"><span>public</span></span><span>&nbsp;</span><span class=\"syntax--meta syntax--method syntax--return-type syntax--java\"><span class=\"syntax--storage syntax--type syntax--primitive syntax--array syntax--java\"><span>int</span></span><span>&nbsp;</span></span><span class=\"syntax--meta syntax--method syntax--identifier syntax--java\"><span class=\"syntax--entity syntax--name syntax--function syntax--java\"><span>executeStrategy</span></span><span>(</span><span class=\"syntax--storage syntax--type syntax--primitive syntax--array syntax--java\"><span>int</span></span><span>&nbsp;</span><span class=\"syntax--variable syntax--parameter syntax--java\"><span>num1</span></span><span>,&nbsp;</span><span class=\"syntax--storage syntax--type syntax--primitive syntax--array syntax--java\"><span>int</span></span><span>&nbsp;</span><span class=\"syntax--variable syntax--parameter syntax--java\"><span>num2</span></span><span>)</span></span><span class=\"syntax--meta syntax--method syntax--body syntax--java\"><span class=\"syntax--punctuation syntax--section syntax--method syntax--begin syntax--java\"><span>{</span></span></span></span></span></span></span></div><div class=\"line\"><span class=\"syntax--source syntax--java\"><span class=\"syntax--meta syntax--class syntax--java\"><span class=\"syntax--meta syntax--class syntax--body syntax--java\"><span class=\"syntax--meta syntax--method syntax--java\"><span class=\"syntax--meta syntax--method syntax--body syntax--java\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"syntax--keyword syntax--control syntax--java\"><span>return</span></span><span>&nbsp;strategy</span><span class=\"syntax--keyword syntax--operator syntax--dereference syntax--java\"><span>.</span></span><span class=\"syntax--meta syntax--method-call syntax--java\"><span class=\"syntax--meta syntax--method syntax--java\"><span>doOperation</span></span><span class=\"syntax--punctuation syntax--definition syntax--method-parameters syntax--begin syntax--java\"><span>(</span></span><span>num1</span><span class=\"syntax--punctuation syntax--definition syntax--seperator syntax--parameter syntax--java\"><span>,</span></span><span>&nbsp;num2</span><span class=\"syntax--punctuation syntax--definition syntax--method-parameters syntax--end syntax--java\"><span>)</span></span></span><span class=\"syntax--punctuation syntax--terminator syntax--java\"><span>;</span></span></span></span></span></span></span></div><div class=\"line\"><span class=\"syntax--source syntax--java\"><span class=\"syntax--meta syntax--class syntax--java\"><span class=\"syntax--meta syntax--class syntax--body syntax--java\"><span class=\"syntax--meta syntax--method syntax--java\"><span class=\"syntax--meta syntax--method syntax--body syntax--java\"><span>&nbsp;&nbsp;&nbsp;</span></span><span class=\"syntax--punctuation syntax--section syntax--method syntax--end syntax--java\"><span>}</span></span></span></span></span></span></div><div class=\"line\"><span class=\"syntax--source syntax--java\"><span class=\"syntax--meta syntax--class syntax--java\"><span class=\"syntax--punctuation syntax--section syntax--class syntax--end syntax--java\"><span>}</span></span></span></span></div></pre></div>\n<p>步骤 4\n使用 Context 来查看当它改变策略 Strategy 时的行为变化。\nStrategyPatternDemo.java</p>\n<div class='midnight'><pre class=\"editor editor-colors\"><div class=\"line\"><span class=\"syntax--source syntax--java\"><span class=\"syntax--meta syntax--class syntax--java\"><span class=\"syntax--storage syntax--modifier syntax--java\"><span>public</span></span><span>&nbsp;</span><span class=\"syntax--meta syntax--class syntax--identifier syntax--java\"><span class=\"syntax--storage syntax--modifier syntax--java\"><span>class</span></span><span>&nbsp;</span><span class=\"syntax--entity syntax--name syntax--type syntax--class syntax--java\"><span>StrategyPatternDemo</span></span></span><span>&nbsp;</span><span class=\"syntax--meta syntax--class syntax--body syntax--java\"><span class=\"syntax--punctuation syntax--section syntax--class syntax--begin syntax--java\"><span>{</span></span></span></span></span></div><div class=\"line\"><span class=\"syntax--source syntax--java\"><span class=\"syntax--meta syntax--class syntax--java\"><span class=\"syntax--meta syntax--class syntax--body syntax--java\"><span>&nbsp;&nbsp;&nbsp;</span><span class=\"syntax--meta syntax--method syntax--java\"><span class=\"syntax--storage syntax--modifier syntax--java\"><span>public</span></span><span>&nbsp;</span><span class=\"syntax--storage syntax--modifier syntax--java\"><span>static</span></span><span>&nbsp;</span><span class=\"syntax--meta syntax--method syntax--return-type syntax--java\"><span class=\"syntax--storage syntax--type syntax--primitive syntax--array syntax--java\"><span>void</span></span><span>&nbsp;</span></span><span class=\"syntax--meta syntax--method syntax--identifier syntax--java\"><span class=\"syntax--entity syntax--name syntax--function syntax--java\"><span>main</span></span><span>(</span><span class=\"syntax--storage syntax--type syntax--object syntax--array syntax--java\"><span>String</span></span><span>[]&nbsp;</span><span class=\"syntax--variable syntax--parameter syntax--java\"><span>args</span></span><span>)</span></span><span>&nbsp;</span><span class=\"syntax--meta syntax--method syntax--body syntax--java\"><span class=\"syntax--punctuation syntax--section syntax--method syntax--begin syntax--java\"><span>{</span></span></span></span></span></span></span></div><div class=\"line\"><span class=\"syntax--source syntax--java\"><span class=\"syntax--meta syntax--class syntax--java\"><span class=\"syntax--meta syntax--class syntax--body syntax--java\"><span class=\"syntax--meta syntax--method syntax--java\"><span class=\"syntax--meta syntax--method syntax--body syntax--java\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"syntax--storage syntax--type syntax--java\"><span>Context</span></span><span>&nbsp;context&nbsp;</span><span class=\"syntax--keyword syntax--operator syntax--assignment syntax--java\"><span>=</span></span><span>&nbsp;</span><span class=\"syntax--keyword syntax--control syntax--new syntax--java\"><span>new</span></span><span>&nbsp;</span><span class=\"syntax--storage syntax--type syntax--java\"><span>Context</span></span><span>(</span><span class=\"syntax--keyword syntax--control syntax--new syntax--java\"><span>new</span></span><span>&nbsp;</span><span class=\"syntax--storage syntax--type syntax--java\"><span>OperationAdd</span></span><span>(</span><span>)</span><span>)</span><span class=\"syntax--punctuation syntax--terminator syntax--java\"><span>;</span></span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span></span></span></span></span></div><div class=\"line\"><span class=\"syntax--source syntax--java\"><span class=\"syntax--meta syntax--class syntax--java\"><span class=\"syntax--meta syntax--class syntax--body syntax--java\"><span class=\"syntax--meta syntax--method syntax--java\"><span class=\"syntax--meta syntax--method syntax--body syntax--java\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"syntax--storage syntax--type syntax--java\"><span>System</span></span><span class=\"syntax--keyword syntax--operator syntax--dereference syntax--java\"><span>.</span></span><span>out</span><span class=\"syntax--keyword syntax--operator syntax--dereference syntax--java\"><span>.</span></span><span class=\"syntax--meta syntax--method-call syntax--java\"><span class=\"syntax--meta syntax--method syntax--java\"><span>println</span></span><span class=\"syntax--punctuation syntax--definition syntax--method-parameters syntax--begin syntax--java\"><span>(</span></span><span class=\"syntax--string syntax--quoted syntax--double syntax--java\"><span class=\"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--java\"><span>&quot;</span></span><span>10&nbsp;+&nbsp;5&nbsp;=&nbsp;</span><span class=\"syntax--punctuation syntax--definition syntax--string syntax--end syntax--java\"><span>&quot;</span></span></span><span>&nbsp;</span><span class=\"syntax--keyword syntax--operator syntax--arithmetic syntax--java\"><span>+</span></span><span>&nbsp;context</span><span class=\"syntax--keyword syntax--operator syntax--dereference syntax--java\"><span>.</span></span><span class=\"syntax--meta syntax--method-call syntax--java\"><span class=\"syntax--meta syntax--method syntax--java\"><span>executeStrategy</span></span><span class=\"syntax--punctuation syntax--definition syntax--method-parameters syntax--begin syntax--java\"><span>(</span></span><span class=\"syntax--constant syntax--numeric syntax--java\"><span>10</span></span><span class=\"syntax--punctuation syntax--definition syntax--seperator syntax--parameter syntax--java\"><span>,</span></span><span>&nbsp;</span><span class=\"syntax--constant syntax--numeric syntax--java\"><span>5</span></span><span class=\"syntax--punctuation syntax--definition syntax--method-parameters syntax--end syntax--java\"><span>)</span></span></span><span class=\"syntax--punctuation syntax--definition syntax--method-parameters syntax--end syntax--java\"><span>)</span></span></span><span class=\"syntax--punctuation syntax--terminator syntax--java\"><span>;</span></span></span></span></span></span></span></div><div class=\"line\"><span class=\"syntax--source syntax--java\"><span class=\"syntax--meta syntax--class syntax--java\"><span class=\"syntax--meta syntax--class syntax--body syntax--java\"><span class=\"syntax--meta syntax--method syntax--java\"><span class=\"syntax--meta syntax--method syntax--body syntax--java\"><span>&nbsp;</span></span></span></span></span></span></div><div class=\"line\"><span class=\"syntax--source syntax--java\"><span class=\"syntax--meta syntax--class syntax--java\"><span class=\"syntax--meta syntax--class syntax--body syntax--java\"><span class=\"syntax--meta syntax--method syntax--java\"><span class=\"syntax--meta syntax--method syntax--body syntax--java\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context&nbsp;</span><span class=\"syntax--keyword syntax--operator syntax--assignment syntax--java\"><span>=</span></span><span>&nbsp;</span><span class=\"syntax--keyword syntax--control syntax--new syntax--java\"><span>new</span></span><span>&nbsp;</span><span class=\"syntax--storage syntax--type syntax--java\"><span>Context</span></span><span>(</span><span class=\"syntax--keyword syntax--control syntax--new syntax--java\"><span>new</span></span><span>&nbsp;</span><span class=\"syntax--storage syntax--type syntax--java\"><span>OperationSubstract</span></span><span>(</span><span>)</span><span>)</span><span class=\"syntax--punctuation syntax--terminator syntax--java\"><span>;</span></span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span></span></span></span></span></div><div class=\"line\"><span class=\"syntax--source syntax--java\"><span class=\"syntax--meta syntax--class syntax--java\"><span class=\"syntax--meta syntax--class syntax--body syntax--java\"><span class=\"syntax--meta syntax--method syntax--java\"><span class=\"syntax--meta syntax--method syntax--body syntax--java\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"syntax--storage syntax--type syntax--java\"><span>System</span></span><span class=\"syntax--keyword syntax--operator syntax--dereference syntax--java\"><span>.</span></span><span>out</span><span class=\"syntax--keyword syntax--operator syntax--dereference syntax--java\"><span>.</span></span><span class=\"syntax--meta syntax--method-call syntax--java\"><span class=\"syntax--meta syntax--method syntax--java\"><span>println</span></span><span class=\"syntax--punctuation syntax--definition syntax--method-parameters syntax--begin syntax--java\"><span>(</span></span><span class=\"syntax--string syntax--quoted syntax--double syntax--java\"><span class=\"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--java\"><span>&quot;</span></span><span>10&nbsp;-&nbsp;5&nbsp;=&nbsp;</span><span class=\"syntax--punctuation syntax--definition syntax--string syntax--end syntax--java\"><span>&quot;</span></span></span><span>&nbsp;</span><span class=\"syntax--keyword syntax--operator syntax--arithmetic syntax--java\"><span>+</span></span><span>&nbsp;context</span><span class=\"syntax--keyword syntax--operator syntax--dereference syntax--java\"><span>.</span></span><span class=\"syntax--meta syntax--method-call syntax--java\"><span class=\"syntax--meta syntax--method syntax--java\"><span>executeStrategy</span></span><span class=\"syntax--punctuation syntax--definition syntax--method-parameters syntax--begin syntax--java\"><span>(</span></span><span class=\"syntax--constant syntax--numeric syntax--java\"><span>10</span></span><span class=\"syntax--punctuation syntax--definition syntax--seperator syntax--parameter syntax--java\"><span>,</span></span><span>&nbsp;</span><span class=\"syntax--constant syntax--numeric syntax--java\"><span>5</span></span><span class=\"syntax--punctuation syntax--definition syntax--method-parameters syntax--end syntax--java\"><span>)</span></span></span><span class=\"syntax--punctuation syntax--definition syntax--method-parameters syntax--end syntax--java\"><span>)</span></span></span><span class=\"syntax--punctuation syntax--terminator syntax--java\"><span>;</span></span></span></span></span></span></span></div><div class=\"line\"><span class=\"syntax--source syntax--java\"><span class=\"syntax--meta syntax--class syntax--java\"><span class=\"syntax--meta syntax--class syntax--body syntax--java\"><span class=\"syntax--meta syntax--method syntax--java\"><span class=\"syntax--meta syntax--method syntax--body syntax--java\"><span>&nbsp;</span></span></span></span></span></span></div><div class=\"line\"><span class=\"syntax--source syntax--java\"><span class=\"syntax--meta syntax--class syntax--java\"><span class=\"syntax--meta syntax--class syntax--body syntax--java\"><span class=\"syntax--meta syntax--method syntax--java\"><span class=\"syntax--meta syntax--method syntax--body syntax--java\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context&nbsp;</span><span class=\"syntax--keyword syntax--operator syntax--assignment syntax--java\"><span>=</span></span><span>&nbsp;</span><span class=\"syntax--keyword syntax--control syntax--new syntax--java\"><span>new</span></span><span>&nbsp;</span><span class=\"syntax--storage syntax--type syntax--java\"><span>Context</span></span><span>(</span><span class=\"syntax--keyword syntax--control syntax--new syntax--java\"><span>new</span></span><span>&nbsp;</span><span class=\"syntax--storage syntax--type syntax--java\"><span>OperationMultiply</span></span><span>(</span><span>)</span><span>)</span><span class=\"syntax--punctuation syntax--terminator syntax--java\"><span>;</span></span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span></span></span></span></span></div><div class=\"line\"><span class=\"syntax--source syntax--java\"><span class=\"syntax--meta syntax--class syntax--java\"><span class=\"syntax--meta syntax--class syntax--body syntax--java\"><span class=\"syntax--meta syntax--method syntax--java\"><span class=\"syntax--meta syntax--method syntax--body syntax--java\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"syntax--storage syntax--type syntax--java\"><span>System</span></span><span class=\"syntax--keyword syntax--operator syntax--dereference syntax--java\"><span>.</span></span><span>out</span><span class=\"syntax--keyword syntax--operator syntax--dereference syntax--java\"><span>.</span></span><span class=\"syntax--meta syntax--method-call syntax--java\"><span class=\"syntax--meta syntax--method syntax--java\"><span>println</span></span><span class=\"syntax--punctuation syntax--definition syntax--method-parameters syntax--begin syntax--java\"><span>(</span></span><span class=\"syntax--string syntax--quoted syntax--double syntax--java\"><span class=\"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--java\"><span>&quot;</span></span><span>10&nbsp;*&nbsp;5&nbsp;=&nbsp;</span><span class=\"syntax--punctuation syntax--definition syntax--string syntax--end syntax--java\"><span>&quot;</span></span></span><span>&nbsp;</span><span class=\"syntax--keyword syntax--operator syntax--arithmetic syntax--java\"><span>+</span></span><span>&nbsp;context</span><span class=\"syntax--keyword syntax--operator syntax--dereference syntax--java\"><span>.</span></span><span class=\"syntax--meta syntax--method-call syntax--java\"><span class=\"syntax--meta syntax--method syntax--java\"><span>executeStrategy</span></span><span class=\"syntax--punctuation syntax--definition syntax--method-parameters syntax--begin syntax--java\"><span>(</span></span><span class=\"syntax--constant syntax--numeric syntax--java\"><span>10</span></span><span class=\"syntax--punctuation syntax--definition syntax--seperator syntax--parameter syntax--java\"><span>,</span></span><span>&nbsp;</span><span class=\"syntax--constant syntax--numeric syntax--java\"><span>5</span></span><span class=\"syntax--punctuation syntax--definition syntax--method-parameters syntax--end syntax--java\"><span>)</span></span></span><span class=\"syntax--punctuation syntax--definition syntax--method-parameters syntax--end syntax--java\"><span>)</span></span></span><span class=\"syntax--punctuation syntax--terminator syntax--java\"><span>;</span></span></span></span></span></span></span></div><div class=\"line\"><span class=\"syntax--source syntax--java\"><span class=\"syntax--meta syntax--class syntax--java\"><span class=\"syntax--meta syntax--class syntax--body syntax--java\"><span class=\"syntax--meta syntax--method syntax--java\"><span class=\"syntax--meta syntax--method syntax--body syntax--java\"><span>&nbsp;&nbsp;&nbsp;</span></span><span class=\"syntax--punctuation syntax--section syntax--method syntax--end syntax--java\"><span>}</span></span></span></span></span></span></div><div class=\"line\"><span class=\"syntax--source syntax--java\"><span class=\"syntax--meta syntax--class syntax--java\"><span class=\"syntax--punctuation syntax--section syntax--class syntax--end syntax--java\"><span>}</span></span></span></span></div></pre></div>\n<p>步骤 5\n验证输出。</p>\n<div class='midnight'><pre class=\"editor editor-colors\"><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>10&nbsp;+&nbsp;5&nbsp;=&nbsp;15</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>10&nbsp;-&nbsp;5&nbsp;=&nbsp;5</span></span></div><div class=\"line\"><span class=\"syntax--text syntax--plain syntax--null-grammar\"><span>10&nbsp;*&nbsp;5&nbsp;=&nbsp;50</span></span></div></pre></div>","frontmatter":{"title":"策略模式","date":"2017-10-03"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/strategy-pattern/","previous":{"fields":{"slug":"/decorator-pattern/"},"frontmatter":{"title":"装饰器模式"}},"next":{"fields":{"slug":"/singleton-pattern/"},"frontmatter":{"title":"单例模式"}}}}